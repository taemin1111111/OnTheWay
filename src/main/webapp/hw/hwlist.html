
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css2?family=Black+And+White+Picture&family=Cute+Font&family=Gamja+Flower&family=Jua&family=Nanum+Brush+Script&family=Nanum+Gothic+Coding&family=Nanum+Myeongjo&family=Noto+Serif+KR:wght@200..900&family=Poor+Story&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

<title>Insert title here</title>

</head>

<body>
<div class="container mt-5" >
    <h3>ğŸš— ê³ ì†ë„ë¡œ íœ´ê²Œì†Œ</h3>
    <br>
    <input type="text" placeholder="ê²€ìƒ‰í•  íœ´ê²Œì†Œ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”." style="width:500px;">&nbsp;&nbsp;&nbsp;
    <button type="button" class="btn btn-success" id="search">ê²€ìƒ‰</button>
    
    
    
    <br><br>
     <div style=" overflow-y: auto; height: 500px;">
    <table class="table table-bordered mt-3">
        <thead class="table-light">
            <tr>
                <th>íœ´ê²Œì†Œ ì´ë¦„</th>
                <th>ë…¸ì„ ëª…</th>
                <th>ìœ„ë„</th>
                <th>ê²½ë„</th>
                <th>íœ´ê²Œì†Œ ì½”ë“œ</th>
            </tr>
        </thead>
   
        <tbody id="restTableBody">
        
         
        		
        
        </tbody>
    </table>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function () {
    const apiUrl = "https://data.ex.co.kr/openapi/locationinfo/locationinfoRest?key=8385161068&type=json&numOfRows=99";
    const serviceKey = "8385161068"; 
    let fullDataList = []; // ì „ì²´ ë°ì´í„°ë¥¼ ì €ì¥í•  ì „ì—­ ë³€ìˆ˜

    // API í˜¸ì¶œ
    $.ajax({
        url: apiUrl,
        method: "GET",
        data: {
            serviceKey: serviceKey,
            numOfRows: 99,
            pageNo: 1
        },
        dataType: "json",
        success: function (response) {
            fullDataList = response.list; // ì „ì²´ ë°ì´í„°ë¥¼ ì €ì¥
            renderTable(fullDataList);    // ì´ˆê¸° ì „ì²´ í…Œì´ë¸” ì¶œë ¥
        },
        error: function (xhr, status, error) {
            console.error("API í˜¸ì¶œ ì˜¤ë¥˜:", error);
            alert("íœ´ê²Œì†Œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");  
        }
    });

    // ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
    $("#search").on("click",  function () {
        const keyword = $("input[type='text']").val().trim();
        const filteredList = fullDataList.filter(item =>
            item.unitName.includes(keyword)
        );
        renderTable(filteredList); // í•„í„°ë§ëœ ë°ì´í„°ë¡œ í…Œì´ë¸” ë‹¤ì‹œ ì¶œë ¥
    });
    
    

    // í…Œì´ë¸” ë Œë”ë§ í•¨ìˆ˜
    function renderTable(dataList) {
        let html = "";
        dataList.forEach(item => {
            html += `
                <tr>
                    <td>${item.unitName}</td>
                    <td>${item.routeName}</td>
                    <td>${item.yValue}</td>
                    <td>${item.xValue}</td>
                    <td>${item.stdRestCd}</td>
                </tr>
            `;
        });
        $("#restTableBody").html(html);
    }
});
    
    
    
    
    
    
    
    
    
</script>
</body>
</html>